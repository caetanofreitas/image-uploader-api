FROM golang:1.17

WORKDIR /go/src
COPY . .
EXPOSE 3000

ENV USE_AWS=${USE_AWS}
ENV S3_NAME=${S3_NAME}
ENV S3_URL=${S3_URL}
ENV AWS_REGION=${AWS_REGION}
ENV AWS_ACCESS_KEY=${AWS_ACCESS_KEY}
ENV AWS_SECRET=${AWS_SECRET}
ENV DATABASE_TYPE=${DATABASE_TYPE}
ENV DATABASE_CONNECTION=${DATABASE_CONNECTION}

RUN go build -o /go/bin/uploader main.go

CMD ["/go/bin/uploader"]